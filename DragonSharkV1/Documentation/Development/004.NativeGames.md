# Native Games

This section describes the format of native games. They come in two formats:

1. HTML files (e.g. `index.html` being the entry point).
2. Native games. These may be anything that can be executed (e.g. binaries or bash scripts).

However, a game must have a specific file and packaging to be recognized as such.

## Games location

The [Layouts file](003.Layout.md) describes the existence of a directory where the roms are
stored. Inside that directory, a `dragonshark` subdirectory must exist for native games to
be recognized. So it may look like this: `/media/pi/SOME-DEVICE/dragonshark`.

Inside that directory, games must exist represented by its directory and a `manifest.xml` file.
For example, something like this:

```shell
/media/pi/SOME-DEVICE/dragonshark/super-cario-bros/manifest.xml
/media/pi/SOME-DEVICE/dragonshark/generic-robo-dude/manifest.xml
/media/pi/SOME-DEVICE/dragonshark/pie-shaped-man/manifest.xml
/media/pi/SOME-DEVICE/dragonshark/speedy-the-porcupine/manifest.xml
```

Each of these manifest files must have its contents in the following format:

```xml
<?xml version="1.0"?>
<hawa-game>
    <!-- First, the game id. Ensure it's unique and Java-like.
         This is NOT a display title but internal id instead.
         These values cannot be empty / absent. -->
    <game-id package="com.my-company" app="MyGame" />
    
    <!-- Then, the command. It must be a simple text, telling
         a path in the same directory or any subdirectory of
         that directory (e.g. let's pretend the game directory
         has a bin/ subdirectory with a run.app binary). -->
    <command>bin/run.app</command>
    
    <!-- Descriptive metadata. This tag must be present, and
         all the fields should be present (the image, however,
         is optional). For the image in particular: it must
         be an image inside the same game directory somewhere,
         pretty much as detailed for the command (if present).
         It will raise an error / be ignored if that constraint
         is not satisfied. -->
    <game-data author="John Doe" year="2026"
               title="The Bus That Couldn't Slow Down"
               image="vendor/image.png" />
    
    <!-- Savefile filtering. These patterns are understood in
         sequence, similar to a .gitignore file: the patterns
         are used as a prefix to tell whether to include the
         files or exclude them. Different to .gitignore, still,
         is that this filtering tells the file to CONSIDER, not
         ignore (i.e. everything excluded or not explicitly
         included becomes ignored). -->
    <save-filters>
        <yes pattern="/some.file" />
        <yes pattern="/some_directory1" />
        <yes pattern="/some_directory2" />
        <but pattern="/some_directory2/some2.file" />
        <but pattern="/some_directory1/some.file" />
        <yes pattern="/some_directory3/some_subdirectory" />
        <but pattern="/some_directory3/some_subdirectory/some_subdirectory2" />
    </save-filters>
</hawa-game>
```
