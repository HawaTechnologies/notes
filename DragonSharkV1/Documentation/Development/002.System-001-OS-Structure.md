# System Setup : OS Structure

This document describes the details of two images:

1. The development image includes the development tools, like gcc and git.
2. The production image does not include development tools.

This means that, save for these details (development tools), the images are built the same.

In order to properly understand the process and instructions, these steps must be carried in
the order they're documented in this page.

## Base OS image

The base OS can be obtained by checking the [Raspbian Image](https://wiki.banana-pi.org/Banana_Pi_BPI-M5#Raspbian) in the official Banana Pi documentation.

## Initial deployment

It was properly stored in a 16gb-total and partitioned Micro SD card. The next steps are:

1. Apply the first install (the `Install / Restore` section [here](002.System-002-Commands.md)).
2. Apply the additional partitions (the `Additional partitions` section [here](002.System-002-Commands.md)).

### SD Card

This image is burned into an SD card. This image configures the SD card into several partitions.

While other partitions serve storage purpose, the main one has boot capabilities. This means that, once inserted
in the SBC and powered, the OS in the boot partition started running (from the SD card).

## System users

There are three users here. Two of them are built-in:

1. `root`: The root user (0).
2. `pi`: The "normal" user (1000). However, it **is** a _sudoer_.

Also, ensuring the password for `root` and `pi` is: `Admin$2024`. The password is actually trivial. It can always be
changed with:

1. `sudo passwd` for `root` user.
2. `GUI option: Start > Preferences > Raspberry Pi Configuration` for `pi` user.
    1. Button: `Change Password`.

Finally, there's a third user: `gamer`. This one is meant to execute native (ARM64) games. This user does
not have its own `$HOME` directory. It was created specifically for this project and used for the internal
launcher utility. This third user has been created like this:

```shell
sudo useradd -M gamer
sudo ln -s /mnt/CURRENT_SAVE /home/gamer
```

## Filesystem(s) layout

the following partitions are present:

```
mmcblk0 (disk)
+-mmcblk0p1 (part, 256mb) /boot (ext4)
+-mmcblk0p2 (part, ...gb) / (ext4)
+-mmcblk0p3 (part, 23mb) /mnt/CURRENT_SAVE (ext4)
+-mmcblk0p4 (part, 2.2gb) /mnt/SAVES (ext4)
mmcblk0boot0 (disk)
mmcblk0boot1 (disk)
mmcblk0rpmb (disk)
```

Where `mmcblk0p2` stands for the big file system for the major parts of the OS and console in general.

The sizes of `mmcblk0p3` and `mmcblk0p4` might be different if the setup was made different, but the
structure will remain.

## Drivers

Aside from the ALSA drivers, and everything that comes out of the box in the image, this system includes
the Wi-Fi driver `rtl8188eu`, compatible with Wi-Fi dongles.
